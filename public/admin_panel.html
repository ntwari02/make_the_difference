<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel</title>
  <link rel="stylesheet" href="css/sidebar.css">
  <link rel="stylesheet" href="css/admin-layout.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <script src="js/include-admin-sidebar.js" defer></script>
  <script src="js/include-admin-header.js" defer></script>
  <style>
    .tablinks.active, .tablinks:focus {
      background: #3b82f6;
      color: #fff;
    }
    .tabcontent { display: none; }
    #adminTabContent > .tabcontent.active { display: block; }
  </style>
</head>
<body class="admin-layout bg-gray-50 dark:bg-gray-900 transition-colors duration-200">
  <div id="admin-sidebar-container"></div>
  <div id="admin-header-container" data-page-title="Admin Panel"></div>
  <main class="admin-main-content">
    <div class="admin-content-container">
      <div id="adminTabContent"></div>
    </div>
  </main>
  <script>
    // Sidebar tab logic with dynamic import
    const tabConfig = [
      { id: 'dashboard', label: 'Dashboard', file: 'admin_dashboard.html' },
      { id: 'users', label: 'Users', file: 'admin_users.html' },
      { id: 'roles', label: 'Roles & Permissions', file: 'admin_rolesPermissions.html' },
      { id: 'scholarship', label: 'Scholarships', file: 'admin_scholarship.html' },
      { id: 'applications', label: 'Applications', file: 'admin_applications.html' },
      { id: 'settings', label: 'General Settings', file: 'admin_generalSettings.html' },
      { id: 'email', label: 'Email Templates', file: 'admin_email_template.html' }
    ];

    function openTab(evt, tabId, file) {
      // Remove active from all tablinks
      document.querySelectorAll('.tablinks').forEach(btn => btn.classList.remove('active'));
      evt.currentTarget.classList.add('active');
      // Load content
      fetch(file)
        .then(res => res.text())
        .then(html => {
          // Extract only the main content (between <main> or a wrapper div)
          const temp = document.createElement('div');
          temp.innerHTML = html;
          let content = temp.querySelector('.admin-content-container') || temp.querySelector('main') || temp;
          document.getElementById('adminTabContent').innerHTML = `<div class="tabcontent active" id="${tabId}">${content.innerHTML}</div>`;
        });
    }

    // Optionally, auto-load the first tab on page load
    window.addEventListener('DOMContentLoaded', () => {
      // Render sidebar as tab buttons
      const sidebar = document.getElementById('admin-sidebar') || document.getElementById('admin-sidebar-container');
      if (sidebar) {
        const nav = sidebar.querySelector('.flex-1') || sidebar;
        if (nav) {
          nav.innerHTML = tabConfig.map(tab =>
            `<button class="tablinks flex items-center p-3 w-full text-left text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg" onclick="openTab(event, '${tab.id}', '${tab.file}')">
              <span class="sidebar-item-text ml-3">${tab.label}</span>
            </button>`
          ).join('');
        }
      }
      // Load first tab
      openTab({currentTarget: document.querySelector('.tablinks')}, tabConfig[0].id, tabConfig[0].file);
    });
  </script>
</body>
</html> 